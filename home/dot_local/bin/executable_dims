#!/usr/bin/env python3

import argparse
import time

from dotfiles import keymonitor, run

parser = argparse.ArgumentParser(description="Show terminal dimensions")
parser.add_argument("-m", "--monitor",
  action="store_true",
  help="monitor the terminal dimensions")
args = parser.parse_args()

def show(newline=True):
  cols = run(["tput", "cols"], check=True).stdout
  lines = run(["tput", "lines"], check=True).stdout
  print(f"\r{cols} Ã— {lines}", end="\n" if newline else "")

if args.monitor:
  with keymonitor() as km:
    while km.get() is None:
      show(newline=False)
      time.sleep(0.1)
else:
  show(newline=True)
