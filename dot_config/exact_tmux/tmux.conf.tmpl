{{- $color := include "_color/color.json" | mustFromJson -}}

# Make colors work properly
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc" # True color

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1

# Remove the escape delay
set -s escape-time 0

# Window settings
set -g allow-rename off
set -g renumber-windows on

# Aliases
set -g command-alias quit=kill-session

# Change prefix to C-a
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload config file
bind r source-file ~/.config/tmux/tmux.conf

# Show/hide the status bar
bind e set -g status

# Better split commands
unbind '"'
unbind %
bind | split-window -h
bind - split-window -v

# Pane navigation
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# Window navigation
unbind n
unbind p
bind h select-window -t -1
bind l select-window -t +1
bind H swap-window -t -1 \; select-window -t -1
bind L swap-window -t +1 \; select-window -t +1

# VI mode copy to clipboard
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

# Status bar
set -g status-style fg='#{{ $color.base03.hex.rgb }}',bg=default
set -g status-justify centre
set -g status-position bottom
set -g status-left ""
set -g status-right ""
set -g window-status-format "#[fg=#{{ $color.base03.hex.rgb }}] #W#{?window_zoomed_flag, ,} "
set -g window-status-current-format "#[fg=#{{ $color.base09.hex.rgb }}] #W#{?window_zoomed_flag, ,} "
set -g window-status-current-style none

# Modes and selections
set -g message-style fg=default,bg=#{{ $color.base03.hex.rgb }}
set -g mode-style fg=default,bg=#{{ $color.base03.hex.rgb }}

# Border colors
set -g pane-border-style fg=#{{ $color.base03.hex.rgb }}
set -g pane-active-border-style fg=#{{ $color.base09.hex.rgb }}
